/*
    Utilities: Shame
    ---
    Hacks and quick fixes
*/

div:empty {
   display: none;
}

body {
    --content-max-width: 35rem;
    --aside-max-width: 15rem;
    display: grid;
    grid-column-gap: $alpha-whitespace;
    grid: ". content ." / minmax(0,1fr) minmax(0, 35rem) minmax(0,1fr);

    @include mq(bp4) {
        grid: ". left content ." / minmax($alpha-whitespace,1fr) minmax(0, var(--aside-max-width)) var(--content-max-width) minmax($alpha-whitespace,1fr);
    }

    @include mq(bp5) {
        grid: ". left content right ." / minmax($alpha-whitespace,1fr) minmax(0, var(--aside-max-width)) var(--content-max-width) minmax(0,var(--aside-max-width)) minmax($alpha-whitespace,1fr);
    }
}

.c-header,
.c-intro,
.c-content {
    grid-column: 1 / -1;
    display: grid;
    grid: inherit;
    grid-gap: inherit;
}

.c-header {
    padding: $alpha-whitespace 0;
    background-color: var(--page-header-background-color);
    margin-bottom: $alpha-whitespace;
    // backdrop-filter: blur(5px);
    // -webkit-backdrop-filter: blur(5px);

    @include mq(bp3) {
        margin-top: $alpha-whitespace;
    }

    @include mq(bp4) {
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        // top: baseline(1);
    }
}

.c-header__logo {
    grid-column: content;
    margin-bottom: 0;
    grid-row: 1;

    @include mq(bp4) {
        grid-column: left;
        // justify-self: end;
    }
}

.c-header__meta {
    @include mq(bp2) {
        grid-row: 1;
        justify-self: end;
    }

    @include mq(bp4) {
        justify-self: start;
    }
}

.c-header__meta,
.c-header__title {
    font-feature-settings: "ss01", "liga", "zero";
    color: var(--page-meta-color);
    grid-column: content;
    transition: all $animation-duration-alpha $animation-easing-alpha;
    margin-bottom: 0;

    @include mq(bp4) {
        grid-row: 1;
    }
}

.c-header__meta {
    @include mq(bp4) {
        .has-scrolled & {
            opacity: 0;
            transform: translateY(baseline(-2));
        }
    }
}

.c-header__title {
    display: none;

    @include mq(bp4) {
        display: block;
        opacity: 0;
        transform: translateY(baseline(2));

        .has-scrolled & {
            opacity: 1;
            transform: translateY(baseline(0));
        }
    }
}

.c-intro {
    @include mq(bp3) {
        margin: $beta-whitespace 0;
    }
}

.c-intro__visual {
    grid-column: content;
    margin-bottom: $beta-whitespace;

    @include mq(bp4) {
        grid-column: left / content;
        // grid-column: content / right;
    }

    // @include mq(bp5) {
    //     grid-column: left / right;
    // }
}

.c-intro__title {
    color: var(--page-heading-color);
    grid-column: content;
}

.c-content {
    background-color: var(--page-background-color);
}

.c-content * {
    grid-column: content;
}

.c-header {
    z-index: 40;
}

.c-intro {
    z-index: 30;
}

.c-content {
    z-index: 20;
}

.c-example {
    margin: $alpha-whitespace 0 0;
}

.c-example__body {
    position: relative;
    // overflow: hidden;
    padding: baseline($root-baseline-multiplier) baseline($root-baseline-multiplier) 0;
	margin-left: baseline($root-baseline-multiplier * -1);
	margin-right: baseline($root-baseline-multiplier * -1);
    margin-bottom: $alpha-whitespace;
    background: var(--example-background-color);
    // background: var(--page-background-color);

    &:after {
        display: block;
        content: '';
        pointer-events: none;
        position: absolute;
        top: -1px;
        right: 0;
        bottom: 0;
        left: 0;
        box-shadow: inset 0 0 0 pxtorem($baseline * $root-baseline-multiplier ) var(--prism-background-color);
        // box-shadow: inset 0 0 0 1px var(--prism-background-color);
        // box-shadow: inset 0 0 40px 10px var(--prism-background-color);
        z-index: 100;
    }

    .has-baseline & {
        .c-baseline-overlay {
            display: block;
            z-index: 90;
        }

        h2,
        p {
            position: relative;
            background-color: var(--baseline-background);
        }
    }
}

.c-example__content {
    position: relative;
    z-index: 110;
}

// .c-example__toggle {
//     display: flex;
//     justify-content: flex-end;
// }

.e-columns {
    // column-count: 2;
    column-width: 15em;
    column-gap: $alpha-whitespace;
}

.e-baseline-title {
    // padding-top: baseline(1.25); ;
    // margin-bottom: baseline(3.75);
    font-weight: $alpha-font-weight;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    @include font-height(ms(8),$root-baseline-multiplier * 2);
}

.e-baseline-paragraph {
    // padding-top: baseline(.75);
    // margin-bottom: baseline(4.25);
}

.c-multiline-background {
    // background-color: hsla(var(--hue-beta), var(--saturation-beta), var(--lightness-beta), .8);
    // color: var(--page-background-color);
    // display: inline;
    // // padding: baseline(.5) baseline(4) baseline(1.5);
    // padding: 0 baseline(3);
    //
    // /* Needs prefixing */
    // box-decoration-break: clone;
    // -webkit-box-decoration-break: clone;
}

.c-hr {
    border : 0;
    height: auto;
    margin: 0 0 baseline($root-baseline-multiplier * 2);
    width: 49%;
    // text-align: center;
    // margin-left: auto;
    // margin-right: auto;

    &::after {
        content: '___';
        display: block;
        // font-family: $code-font-family;
        font-weight: $beta-font-weight;
        letter-spacing: .15em;
        // letter-spacing: 3px;
        color: var(--page-meta-color);
        // color: var(--color-alpha);
        @include font-height(ms(0),$root-baseline-multiplier)
    }
}

.c-type-intro {
    // color: var(--page-meta-color);
    // @include font-height(ms(2),$root-baseline-multiplier + 1);
}

// .c-type-intro::first-letter {
//     float: left;
//     margin-right: baseline(1);
//     // font-family: $pixel-font-family;
//     font-family: $code-font-family;
//     color: var(--page-heading-color);
//     @include font-height(ms(10),$root-baseline-multiplier * 2);
// }
