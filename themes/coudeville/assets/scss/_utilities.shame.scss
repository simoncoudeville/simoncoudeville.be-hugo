/*
    Utilities: Shame
    ---
    Hacks and quick fixes
*/

div:empty {
   display: none;
}

.c-type-meta {
    color: var(--page-meta-color);
    font-family: $code-font-family;
    @include font-height(ms(-1), $root-baseline-multiplier);
}

.c-link-back {
    // font-family: $delta-font-family;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    border-radius: $radius;
    // @include font-height(ms(-1),$root-baseline-multiplier);

    .c-icon {
        margin-right: baseline(2);

        @include mq(bp2) {
            margin-right: baseline(3);
            margin-left: baseline(-7);
        }

        @include mq(bp4) {
            margin-right: baseline(2);
            margin-left: 0;
        }
    }

    &,
    &:visited {
        color: var(--page-heading-color);
    }

    &:hover {
        .c-icon {
            transform: translateX(baseline(-.5));
        }
    }
}

.c-icon {
    width: baseline(4);
    fill: none;
    stroke: currentColor;
    stroke-width: 1.25;
    transition: all $animation-duration-alpha $animation-easing-alpha;
}

.c-single {
    position: relative;
    padding: 0 baseline($root-baseline-multiplier);
    max-width: calc(#{baseline($root-baseline-multiplier * 4)} + 36rem);
    margin: 0 auto;

    @include mq(bp2) {
        padding: 0 baseline($root-baseline-multiplier * 2);
    }

    @include mq(bp4) {
        max-width: none;
        padding: 0;
        display: grid;
        grid: ". left content right ." / baseline($root-baseline-multiplier * 3) 1fr 36rem 1fr ;
        grid-gap: 0 baseline($root-baseline-multiplier);
    }
}

.c-single__logo {
    margin-bottom: 0;
    color: var(--page-meta-color);
    // margin-top: baseline($root-baseline-multiplier);
    // color: var(--page-heading-color);
    // font-family: $gamma-font-family;
    // text-transform: uppercase;
    // letter-spacing: .1em;
    // font-weight: $beta-font-weight;

    // @include mq(bp2) {
    //     margin-top: baseline($root-baseline-multiplier * 2);
    // }

    @include mq(bp4) {
        grid-row-start: 1;
        grid-row-end: span 2;
        grid-column: 1;
        align-self: end;
        justify-self: start;
        // transform-origin: 0 0;
        // transform: rotate(90deg);
        margin-left: baseline($root-baseline-multiplier);
        // margin-top: baseline(6);
        margin-right: 0;
        writing-mode: vertical-rl;
        transform: rotate(180deg);
    }
}

.c-single__logo--sticky {
    @include mq(bp4) {
        position: sticky;
        bottom: baseline(6);
    }
}

.c-single__meta {
    color: var(--page-meta-color);
    font-family: $code-font-family;
    font-feature-settings: "ss01", "zero";
    margin-bottom: 0;
    transition: all $animation-duration-alpha $animation-easing-alpha;
    @include font-height(ms(-1),$root-baseline-multiplier);

    @include mq(bp4) {
        // grid-column: content;
        // grid-row: 1;
        // align-self: start;
        // margin-top: baseline($root-baseline-multiplier);
        grid-row-start: 1;
        grid-row-end: span 2;
        grid-column: 1;
        align-self: start;
        justify-self: start;
        // transform-origin: 0 0;
        // transform: rotate(90deg);
        margin-left: baseline($root-baseline-multiplier);
        margin-top: baseline(6);
        margin-right: 0;
        writing-mode: vertical-rl;
        transform: rotate(180deg);
    }

    .has-scrolled & {
        opacity: 0;
        transform: translateY(baseline(-2));
    }
}

.c-single__meta--sticky {
    @include mq(bp4) {
        position: sticky;
        top: baseline(6);
    }
}

.c-single__header {
    @include mq(bp4){
        min-height: calc(100vh - #{baseline($root-baseline-multiplier * 5)};
        align-items: flex-end;
        display: flex;
        grid-column: left;
        grid-column-end: span 2;
        grid-row: 1;
    }
}

.c-single__title {
    grid-column: content;
    color: var(--page-title-color);
    // margin-top: baseline(26);
    margin-top: baseline($root-baseline-multiplier * 8);
    margin-bottom: baseline($root-baseline-multiplier * 3);
    transition: all $animation-duration-alpha $animation-easing-alpha;
    // margin-bottom: baseline(13);
    // margin-bottom: baseline(-15);
    // margin-bottom: baseline(-2);
    // margin-bottom: 0;

    .has-scrolled & {
        opacity: 0;
    }

    @include mq(bp4){
        grid-column-end: span 2;
        grid-row: 2;
        padding-left: baseline($root-baseline-multiplier * 2);
        // margin-top: calc(100vh - #{baseline(68)});
    }

    @include mq(bp4,max) {
        opacity: 1 !important;
    }
}

.c-single__content {
    grid-column: content;

    @include mq(bp4) {
        padding-top: baseline($root-baseline-multiplier * 3);
        padding-bottom: baseline($root-baseline-multiplier * 2);
        // padding-top: baseline(13);
        // padding-top: baseline(28);
        // padding: baseline(15 + $root-baseline-multiplier * 2) 0 baseline($root-baseline-multiplier * 3);
    }
}

.c-single__toggle {
    grid-column: content;
    background-color: var(--page-background-color);

    @include mq(bp4) {
        grid-column: right;
        grid-row: 3;
        align-self: end;
        justify-self: end;
        position: fixed;
        right: 0;
        bottom: 0;
    }
}


.c-single__sticky-bar {
    display: block !important;
    position: sticky;
    grid-row-start: 1;
    grid-row-end: span 2;
    grid-column: 1;
    // margin-top: baseline(6);
    top: 0;
    left: 0;
    // height: baseline(13);
    background-color: var(--page-sticky-bar-background);
    // box-shadow: 0 0 0 1px rgba(white,.15);
    // box-shadow: 0 0 baseline(1) hsla(var(--hue), 5%, 10%, .2);
    // opacity: 0;
    transition: opacity $animation-duration-beta $animation-easing-alpha;

    // &:after {
    //     content: '';
    //     display: block;
    //     position: absolute;
    //     top: baseline(-20);
    //     right: 0;
    //     left: 0;
    //     height: baseline(20);
    //     background-color: var(--page-sticky-bar-background);
    // }

    .is-light & {
        // box-shadow: 0 0 50px hsla(var(--hue), 1%, 10%, .15);
        // box-shadow: 0 0 baseline(5) hsla(var(--hue), 5%, 10%, .15);
        // box-shadow: 0 0 0 1px hsla(var(--hue), 1%, 10%, .075);
    }

    &.is-shown {
        opacity: .95;
    }

    // .has-scrolled & {
    //     box-shadow: 0 0 baseline(3) hsla(var(--hue), 1%, 10%, .15);
    // }

    @include mq(bp4,max) {
        display: none !important;
    }
}

.c-single__sticky-bar-observer {
    display: block !important;
    height: baseline(6);
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;

    @include mq(bp4,max) {
        display: none !important;
    }
}

.c-single__background {
    display: block !important;
    background-color: var(--page-header-background-color);
    // background-image: linear-gradient(to bottom, white, var(--page-background-color));
    grid-column: 1 / -1;
    grid-row: 1 / 4;

    @include mq(bp4) {
        grid-row: 1 / 2;
    }
}

// .c-single__sticky-title {
//     display: none;
//     // font-family: $delta-font-family;
//     position: sticky;
//     top: baseline(4);
//     grid-column: content;
//     grid-row-start: 2;
//     align-self: start;
//     color: var(--page-meta-color);
//     // color: var(--page-link-color);
//     // color: var(--page-text-color);
//     font-feature-settings: "salt";
//     visibility: hidden;
//     transform: translateY(baseline(2));
//     opacity: 0;
//     margin-bottom: baseline(4);
//     transition: all $animation-duration-alpha $animation-easing-alpha;
//
//     @include mq(bp4) {
//         display: block;
//         text-align: left;
//
//         .has-scrolled & {
//             visibility: visible;
//             opacity: 1;
//             transform: translateY(0);
//         }
//     }
// }

// Z-indexes

.c-single {
    z-index: 100;
}

.c-single__content {
    z-index: 10;
}

.c-single__background {
    z-index: 60;
}

.c-single__sticky-bar {
    z-index: 90;
}

.c-single__sticky-title {
    z-index: 150;
}

.c-single__logo {
    z-index: 160;
}

.c-single__meta {
    z-index: 170;
}

.c-single__header {
    z-index: 80;
}

.c-baseline-overlay {
    z-index: 90;
}

.c-section {
    & + & {
        padding-top: baseline($root-baseline-multiplier);

        @include mq(bp3) {
            padding-top: baseline($root-baseline-multiplier * 2);
        }

        @include mq(bp4) {
            padding-top: baseline($root-baseline-multiplier * 3);
        }

        @include mq(bp4) {
            padding-top: baseline($root-baseline-multiplier * 4);
        }
    }
}

.c-type-intro {
    // font-family: $delta-font-family;
    // @include font-height(ms(-1),4.5);
    // @include mq(bp3) {
    //     @include font-height(ms(2),5);
    // }
    //
    // @include mq(bp4) {
    //     @include font-height(ms(3),5);
    // }

    // @include mq(bp4) {
    //     @include font-height(ms(5),6);
    // }
}

.c-columns {
    @include mq(bp3) {
        display: grid;
        grid-template-columns: 50% 50%;
    }
}

.u-ms4 {
    @include font-height(ms(8),$root-baseline-multiplier * 2);
}
